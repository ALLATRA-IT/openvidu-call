<div id="videoRoomNavBar">
  <app-dialog-choose-room
    *ngIf="showDialogChooseRoom"
    [userNickname]="user"
    [sessionName]="sessionName"
    [autopublish]="ovSettings && ovSettings.autopublish"
    (join)="toggleDialogChooseRoom($event)"
  ></app-dialog-choose-room>

  <div *ngIf="localUsers && localUsers[0]">
    <app-toolbar
      [lightTheme]="lightTheme"
      [newMessagesNum]="newMessages"
      [compact]="compact"
      [localUser]="localUsers[0]"
      [mySessionId]="mySessionId"
      [ovSettings]="ovSettings"
      (stopCameraClicked)="stopCamera()"
      (camButtonClicked)="toggleCam()"
      (micButtonClicked)="toggleMic()"
      (screenShareClicked)="screenShareAndChangeScreen()"
      (stopScreenSharingClicked)="stopScreenSharing()"
      (exitButtonClicked)="exitSession()"
      (chatButtonClicked)="toggleChat($event)"
    ></app-toolbar>

    <app-dialog-extension
      *ngIf="showDialogExtension"
      [nickname]="localUsers[0].getNickname()"
      (cancel)="toggleDialogExtension()"
    ></app-dialog-extension>

    <div id="layout" class="bounds" [class.boundsLight]="lightTheme" *ngIf="localUsers">
 
      <div
        class="OT_root OT_publisher custom-class"
        id="localUser"
        *ngFor="let localUser of localUsers"
        (dblclick)="enlargeElement($event)"
      >
        <stream-component *ngIf="localUser.getStreamManager()"
          #videoStream
          [user]="localUser"
          [localUser]="localUsers[0]"
          [lightTheme]="lightTheme"
          [newMessagesNum]="newMessages"
          [compact]="compact"
          (nicknameClicked)="nicknameChanged($event)"
          (camButtonClicked)="toggleCam()"
          (micButtonClicked)="toggleMic()"
          (exitButtonClicked)="exitSession()"
          (chatButtonClicked)="toggleChat($event)"
          (screenShareClicked)="screenShareAndChangeScreen()"
          (stopScreenSharingClicked)="stopScreenSharing()"
        ></stream-component>

      </div>

      <div
        *ngFor="let user of this.remoteUsers"
        class="OT_root OT_publisher custom-class"
        id="remoteUsers"
        (dblclick)="enlargeElement($event)"
      >
        <stream-component
          #videoStream
          [user]="user"
          [localUser]="localUsers[0]"
          [lightTheme]="lightTheme"
          [newMessagesNum]="newMessages"
          [compact]="compact"
          (camButtonClicked)="toggleCam()"
          (micButtonClicked)="toggleMic()"
          (exitButtonClicked)="exitSession()"
          (chatButtonClicked)="toggleChat($event)"
          (screenShareClicked)="screenShareAndChangeScreen()"
          (stopScreenSharingClicked)="stopScreenSharing()"
        ></stream-component>
      </div>

      <div
        class="OT_root OT_dialog  custom-class"
        [style.display]="chatDisplay"
        *ngIf="localUsers && (localUsers[0].getStreamManager() && (!this.ovSettings || (this.ovSettings && this.ovSettings.chat)))"
      >
        <chat-component
          #chatComponent
          [session]="this.session"
          [user]="this.localUsers[0]"
          [chatDisplay]="chatDisplay"
          [lightTheme]="lightTheme"
          [messageList]="messageList"
          (closeChat)="toggleChat(undefined)"
        ></chat-component>
      </div>
    </div>
  </div>
</div>
